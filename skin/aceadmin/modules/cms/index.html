<div class="page-content-area">
  <div class="page-header">
    <h1>
      Page Lists
      <small style="display: none;">
		  <i class="ace-icon fa fa-angle-double-right"></i>
		  {$bc_name}
      </small>
    </h1>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <!-- Content Starts Here -->
      <div class="widget-box widget-color-blue hid" id="widge">
        <div class="widget-header">
          <div class="widget-toolbar no-border widgeToolRemSpace" id = "widgetItemActions">
            <button id = "btnEditForm" class="btn btn-success btn-xs">
            <i class="fa fa-pencil"></i>
            Edit
            </button>
            <button class="btn btn-xs showGlobal btn-danger colorImportant" data-getDetails = "forDeleteFxn">
            <i class="fa fa-trash"></i>
            Delete
            </button>
          </div>
          <div class="widget-toolbar no-border widgeToolRemSpace">
            <button class="btn btn-xs btn-info bigger closeWidge">
            <i class="ace-icon fa fa-arrow-left"></i>
            Back
            </button>
          </div>
        </div>
        <div class="widget-body">
          <form  id = "genericForm" class="form-horizontal" role="form">
            <div class="widget-main">
              <!-- Widget Content / Editor Form -->
              <div class="row">
                <div class="col-xs-12">
                  <div class="step-pane" id="step1">
                    <input type="hidden" id="id_page" name = "data[whr_id_page]" value = ""/>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcName"> Title </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputTitle" name="data[clmn_title]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled' required/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcHtmlId"> Link Rewrite </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputLinkRewrite" name="data[clmn_link_rewrite]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled' required/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcModule"> Banner Image </label>
                      <div class="col-sm-10">
                        <input class="col-xs-10 col-sm-5 fieldEditable imgupload" type="hidden" id="image_src" name="data[clmn_image_src]" data-upload-fxn="" data-img-src="" data-img-type="" data-upload-folder="images/banner" data-file-path="{$base_url}upload/images/banner/" data-dashboard-url="{$admin_base}" data-upload-url="{$admin_base}pages/process/upload-banner" />
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Caption </label>
                      <div class="col-sm-10">
                        <textarea placeholder="" name="data[clmn_caption]" id="inputPageCaption" class="input-xxlarge content_display"></textarea>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Redirect</label>
                      <div class="col-sm-10">
                        <input type="checkbox"  class="ace fieldEditable"  checked = "checked" disabled="disabled"  id="inputRedirect" name = "data[clmn_redirect]"   />
                        <span class="lbl"></span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Parent </label>
                      <div class="col-sm-10">
                        <select name="data[clmn_id_parent]" id="inputParent" class="input-xxsmall fieldEditable"  disabled='disabled'>
                          <option value="0"> -- Select Parent Page -- </option>
                          {page_recurse array=$tree option='dropdown'}
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Content </label>
                      <div class="col-sm-10">
                        <textarea placeholder="Default Meta Description" name="data[clmn_content]" id="inputPageContent" class="input-xxlarge content_display"></textarea>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Module </label>
                      <div class="col-sm-10">
                        <select name="data[clmn_class]" id="inputClass" class="input-xxsmall fieldEditable" disabled='disabled'>
                        {foreach from=$modules item=item}
                        <option value="{$item.module_class}" id="mod_{$item.module_class}" {if $item.module_class eq 'pages'}selected{/if}>{$item.module_name}</option>
                        {/foreach}
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Function </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputFunction" name="data[clmn_function]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled' value = "index" required/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Meta Title </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputMetaTitle" name="data[clmn_meta_title]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled'/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Meta Keywords </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputMetaKeywords" name="data[clmn_meta_keywords]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled'/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Meta Keywords </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputMetaKeywords" name="data[clmn_meta_keywords]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled'/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Meta Description </label>
                      <div class="col-sm-10">
                        <input type="text" id="inputMetaDesc" name="data[clmn_meta_description]" class = "col-xs-10 col-sm-5 fieldEditable" disabled = 'disabled'/>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label no-padding-right" for="inputBcMethod"> Meta Image </label>
                      <div class="col-sm-10">
                        <input class="span8 fieldEditable imgupload" type="hidden" id="meta_image" 
                          name="data[clmn_meta_image]" 
                          data-upload-fxn="" 
                          data-img-src="" 
                          data-img-type="" 
                          data-upload-folder="images/banner" 
                          data-file-path="{$base_url}upload/images/banner/" 
                          data-dashboard-url="{$admin_base}" 
                          data-upload-url="{$admin_base}pages/process/upload-banner" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Widget End -->
            </div>
            <div class="widget-toolbox padding-8 clearfix" id="formActions">
              <a class="btn btn-xs btn-danger closeWidge ignore">
              <i class="ace-icon fa fa-times"></i>
              <span class="bigger-110">Cancel</span>
              </a>
              <input type = 'reset' id = "resetForm" class = "hid"/>
              <button class="btn btn-xs btn-success" data-last="Finish" id="submit">
              <span class="bigger-110">Submit</span>
              <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
              </button>
              <img src = "img/loading_whitebg.gif" id = "sgLoading_whitebg" class ="hid loaderGif" style = "vertical-align:bottom !Important;"/>&nbsp;&nbsp;&nbsp;
              <img src = "img/3d_whitebg.gif" id = "sgLoader_whitebg" class ="hid loaderGif"/>
            </div>
          </form>
        </div>
      </div>
      <!-- Content Ends Here -->
    </div>
    <div class="col-xs-12">
      <div class="table-header">
        <button id = "dtAddRow" class="btn btn-sm pull-right btn-info showWidge">
        <i class="icon-plus"></i> Add Page
        </button>
        <div class="clearfix"></div>
      </div>
      <div class="table-responsive">
        <div class="dataTables_borderWrap">
          <div>
            <table id="DT_Generic" style ="display:none;" class="table table-striped table-bordered table-hover dataTable">
              <thead>
                <tr>
                  <th class="pageLinkRewrite">Link Rewrite</th>
                  <th class="pagePageTitle">Page Title</th>
                  <th class="pageModule">Module</th>
                  <th class="pageFunction">Function</th>
                  <th class="pageActions"></th>
                </tr>
              </thead>
              <tfoot>
                <tr>
                  <th class="pageLinkRewrite">Link Rewrite</th>
                  <th class="pagePageTitle">Page Title</th>
                  <th class="pageModule">Module</th>
                  <th class="pageFunction">Function</th>
                  <th class="pageActions"></th>
                </tr>
              </tfoot>
              <tbody>
                {assign var="main1" value="1"}
                {foreach from=$pages item=item}
                <tr>
                  <input type="hidden" name="id_page" id="id_page" value="{$item.id_page}">
                  <td  align="left">
                    {if $item.depth > 1}{assign var="base" value="20"}{else}{assign var="base" value="0"}{/if}
                    {assign var=margin value=$base*$item.depth}
                    {$item.absolute_link|truncate:40:"...":true}
                  </td>
                  <td>{$item.title}</td>
                  <td>{$item.class}</td>
                  <td>{$item.function}</td>
                  <td class="td-actions" id = "jdata{$item.id_page}" data-var = "modules">
                    <div class = "hid" id = "jd{$item.$id_page}" >{$item.json}</div>
                    <div class = "center" >
                      <div class="inline position-relative">
                        <button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
                        <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                          <li>
                            <a href="javascript:;" class="showWidge setFormValues tooltip-info ignore btn-yellow" data-rel="tooltip" title="View">
                            <span class="blue">
                            <i class="fa fa-search-plus"></i>
                            </span>
                            </a>
                          </li>
                          <li>
                            <a href="javascript:;" class="showWidge setFormValues editItem tooltip-success ignore" data-rel="tooltip" title="Edit">
                            <span class="green">
                            <i class="fa fa-pencil"></i>
                            </span>
                            </a>
                          </li>
                          <li>
                            <a href="javascript:;" class="tooltip-error showGlobal ignore tooltip-error" data-rel="tooltip" title="Delete" data-modID="jdata{$item.id_page}" data-getDetails="forDeleteFxn">
                            <span class="red">
                            <i class="fa fa-trash"></i>
                            </span>
                            </a>
                          </li>
                        </ul>
                      </div>
                  </td>
                </tr>
                {/foreach}
              </tbody>
            </table>
            </div>
          </div>
        </div>
        <span class = "hid" id = "forDeleteFxn" data-mtitle = "Delete" data-mbody = "Are you sure you want to delete this page?" data-myes = "deleteRow();"></span>
      </div>
      <!-- /.col -->
    </div>
  </div>
</div>
