<h3 class="header smaller lighter blue">View Section</h3>
<div class="widget-box hid" id = "widge">
    <div class="widget-header widget-header-blue widget-header-flat" style = "padding-right: 15px !Important;">
		<h4></h4>
		<div class="widget-toolbar widgeToolRemSpace" id = "widgetItemActions">
			<button id = "btnEditForm" class="btn btn-success radius6 btn-small">
				<i class="icon-pencil"></i>
				Edit
			</button>
			<button class="btn btn-small showGlobal radius6 btn-danger colorImportant " data-getDetails = "forDeleteFxn">
				<i class="icon-trash"></i>
				Delete
			</button>
		</div>
		<div class="widget-toolbar widgeToolRemSpace">
			<button class="btn btn-small btn-info closeWidge radius6">
				<i class="icon-arrow-left"></i>
				Back
			</button>
		</div>
    </div>
    <div class="widget-body">
        <div class="widget-main">
            <div class="row-fluid">
				<form  id = "genericForm" class="form-horizontal">
					<div class="row-fluid position-relative">
						<div class="step-pane" id="step1">
							<div>
								<input type="hidden" id="id_page" name = "where[id_page]" value = "{$page.id_page}"/>
								<input type="hidden" id="key_section" name = "where[key_section]" value = ""/>
								<input type="hidden" id="sec_column" name = "where[column]" value = ""/>
								<div class="control-group">
									<label class="control-label" for="form-field-1">Title</label>
									<div class="controls">
										<input type="text" class="span8 fieldEditable" id="section_title" disabled="disabled" name="data[section_title]" required/> </div>
								</div>
								<div class="control-group">
									<label class="control-label" for="form-field-1">Sub Title</label>
									<div class="controls">
										<input type="text" class="span8 fieldEditable" id="section_subtitle" disabled="disabled" name="data[section_subtitle]" required/> </div>
								</div>
								<div class="control-group">
									<label class="control-label" for="form-field-1">Active</label>
									<div class="controls">
										<input type="checkbox" class="ace-checkbox-2 fieldEditable" disabled="disabled" id="active" name="data[isActive]" /> <span class="lbl"></span> </div>
								</div>
								<div class="control-group">
									<label class="control-label" for="form-field-1">Type</label>
									<div class="controls">
										<input type="radio" class="col-sm-2 fieldEditable content-type" id="content_type_page" disabled="disabled" name="data[content_type]" value="page" required/> <span class="lbl">Page</span> &nbsp; &nbsp;
										<input type="radio" class="col-sm-2 fieldEditable content-type" id="content_type_module" disabled="disabled" name="data[content_type]" value="module" required/> <span class="lbl">Module</span>
									</div>
								</div>
								<input type="hidden" value="" name="data[pages]" id="page" class="sec_page">
								
								<div id="page_type" style="display:none;"> <!-- pages -->
									<div class="control-group"> <!-- pages -->
										<label class="control-label" for="form-field-1">Template</label>
										<div class="controls">
											<input type="hidden" value="" name="data[limit]" id="limit"> 
											{foreach from=$section_temp item=item}
											<label> {assign var="section_html" value="../default/images/sections/`$item`.png"}
											<input type="radio" class="span1 fieldEditable templateList" data-templisttype="page" id="template_name_{$item}" disabled="disabled" name="data[template_name]" value="{$item}" required/>
												<span class="lbl">
													<button type="button" class="viewTemplateButton btn btn-info btn-lg" data-toggle="modal" data-idPage="{$page.id_page}" data-img="{$section_html}" data-target="#viewTemplate">
													<img class="section-templates"src="{$section_html}" >
													</button>
												</span>
											</label>
											<br/>
											{/foreach} 
										</div>
										<p>
											<div id="templateNotif" style='display:none;'></div>
										</p>
									</div>
									<div class="control-group"> <!-- pages -->
										<label class="control-label" for="form-field-1">Pages</label>
										<div class="controls">
											{foreach from=$pages item=item}
											<input type="checkbox"  class="val-page val-list fieldEditable " disabled="disabled"  id="pages_{$item.id_page}" value="{$item.id_page}"/> 
											<span class="lbl"></span> {$item.title}
											<br>
											{/foreach}
										</div>
									</div>
								</div>
								
								<div id="module_type" style="display:none;">  <!-- modules -->
									<div class="control-group"> <!-- modules -->
										<label class="control-label" for="form-field-1">Pages</label>
										<div class="controls">
											{foreach from=$pages item=item}
											{if $item.module_name neq 'pages'}
											<input type="radio" class="col-sm-2 val-list fieldEditable val-module"  id="pages_{$item.id_page}" disabled="disabled" name="modules" data-modulename="{$item.module_name}" value="{$item.id_page}" required/> <span class="lbl">{$item.title}</span>
											<br>
											{/if}
											{/foreach}
										</div>
									</div>
									<div class="control-group"> <!-- templates -->
										<label class="control-label" for="form-field-1">Template</label>
										<div class="controls">
											<input type="hidden" value="" name="data[limit]" id="limit"> 
											{foreach from=$module_temp item=item}
											<label style="display:none;">
												{assign var="module_html" value="../default/images/modules/`$item`.png"}
												{assign var="filename_array" value="_"|explode:$item}
												<input type="radio"  class="span1 fieldEditable" data-templisttype="module" id="template_name_{$item}" disabled="disabled" name="data[template_name]" value="{$item}" required/> 
												<span class="lbl">	
												<a class="viewTemplateButton {$filename_array.0} moduleTempaltes" data-toggle="modal" role="button" href="#viewTemplate" data-img="{$module_html}"><img src="{$module_html}" class="section-templates"></a></span>
											</label>
											<!-- 	<a class="viewTemplateButton {$filename_array.0} moduleTempaltes" data-toggle="modal" role="button" href="#viewTemplate" data-img="{$module_html}"><img src="{$module_html}" class="img-responsive section-sample-layout"></a>
												<input type="radio" class="col-sm-2 fieldEditable" data-templisttype="module" id="template_name_{$item}" disabled="disabled" name="data[template_name]" value="{$item}" required/> 
												<span class="lbl"></span>
												<br/>
												<br/> --> 
											 
										{/foreach} 
										</div>
										<p>
											<div id="templateNotif" style='display:none;'></div>
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
					<hr />
					<div class="row-fluid center hid" id = "formActions">
						<a class="btn btn-prev btn-small closeWidge ignore">Cancel</a>
						<input type = 'reset' id = "resetForm" class = "hid"/>
						<button class="btn btn-success btn-next btn-small" data-last="Finish " id="submit">Submit</button>
						<img src = "img/loading_whitebg.gif" id = "sgLoading_whitebg" class ="hid loaderGif" style = "vertical-align:bottom !Important;"/>&nbsp;&nbsp;&nbsp;
						<img src = "img/3d_whitebg.gif" id = "sgLoader_whitebg" class ="hid loaderGif"/>
					</div>
				</form>
            </div>
        </div>
        <!--/widget-main-->
    </div>
    <!--/widget-body-->
</div>

<div class="row-fluid">
{assign var="layout" value=$page.layout}
<div class="control-group">
	<label class="control-label" for="form-field-1">Page Layout: </label>
	<div class="controls">
		<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-idPage="{$page.id_page}" data-target="#layoutTempModal"><i class="icon-ok bigger-120"></i>{if $layout.filename}{$layout.filename}{else}Select Layout Template{/if}</button>
	</div>
</div>

<br>
<br>
<br>
</div>
<input type="hidden" value="" id="sec_order">
<input type="hidden" value="{$page.id_page}" id="id_page_order">
<input type="hidden" value="" id="col_order">
<div class="control-group">
	<label class="control-label" for="form-field-1">Page Sections: </label>
</div>
<div class="row-fluid">
{assign var="format" value="_"|explode:$layout.format}
{assign var="sections" value=$page_sections}
<div class="col-sm-{$format.0} widget-container-span1" {if $layout.columns >= 1}{else}style="display:none;"{/if}>
	{foreach from=$sections.col0 item=item key="key"}
	{assign var="html_file" value=$item.template_html}
	<div id="colsec0" class="widget-box collapsed" data-index="{$key}" data-column="col0" data-sectionKey="{$key}" data-idPage="{$page.id_page}" data-column="col0" >
		<div class="widget-header widget-header-small header-color-orange">
			<h6>
				<i class="icon-sort"></i>
				{$item.section_title}
			</h6>

			<div class="widget-toolbar">
				<div class="hid  col0{$page.id_page}{$item.key_section}" id="jd{$key}">{$item.json}</div>
				<a title="Edit" data-rel="tooltip" data-column="col0" data-idPage="{$page.id_page}" data-keySection="{$item.key_section}" data-modID="jdata{$key}"  class="showWidge setFormValues editItem tooltip-success ignore" href="javascript:;">
					<span class="green">
						<i class="fa fa-pencil"></i>
					</span>
				</a>
				<a data-modid="jdata2" title="Delete" data-rel="tooltip" data-keySection="{$item.key_section}" data-idPage="{$page.id_page}" data-column="col0" data-toggle="modal" href="#secDeleteModal" role="button" class="tooltip-error ignore" href="javascript:;">
					<span class="red">
						<i class="fa fa-trash"></i>
					</span>
				</a>
				<a href="#" data-action="collapse"> <i class="icon-chevron-down"></i> </a>
			</div>
		</div>

		<div class="widget-body">
			<div class="widget-main">
					{assign var="html_file" value=$item.template_html}
					{include file=$html_file}
			</div>
		</div>
	</div>
	{/foreach}
	<div><button id="dtAddRow" data-column="col0" class="btn radius6 btn-small btn-info showWidge addReset addbtncol0"> <i class="icon-plus"></i> Add Section </button></div>
</div>

<div class="col-sm-{$format.1} widget-container-span2" {if $layout.columns >= 2}{else}style="display:none;"{/if}>
	{foreach from=$sections.col1 item=item key="key"}
	{assign var="html_file" value=$item.template_html}
	<div  id="colsec1" class="widget-box collapsed" data-index="{$key}" data-column="col1" data-sectionKey="{$key}" data-idPage="{$page.id_page}">
		<div class="widget-header widget-header-small header-color-orange">
			<h6>
				<i class="icon-sort"></i>
				{$item.section_title}
			</h6>

			<div class="widget-toolbar">
				<div class="hid  col1{$page.id_page}{$item.key_section}" id="jd{$key}">{$item.json}</div>
				<a title="Edit" data-rel="tooltip" data-column="col1" data-idPage="{$page.id_page}" data-keySection="{$item.key_section}" data-modID="jdata{$key}"  class="showWidge setFormValues editItem tooltip-success ignore" href="javascript:;">
					<span class="green">
						<i class="fa fa-pencil"></i>
					</span>
				</a>
				<a data-getdetails="forDeleteFxn" data-modid="jdata2" title="Delete" data-rel="tooltip" data-keySection="{$item.key_section}" data-idPage="{$page.id_page}" data-column="col1" data-toggle="modal" href="#secDeleteModal" role="button"class="tooltip-error showGlobal ignore tooltip-error" href="javascript:;">
					<span class="red">
						<i class="fa fa-trash"></i>
					</span>
				</a>
				<a href="#" data-action="collapse"> <i class="icon-chevron-down"></i> </a>
			</div>
		</div>

		<div class="widget-body">
			<div class="widget-main">
					{assign var="html_file" value=$item.template_html}
					{include file=$html_file}
			</div>
		</div>
	</div>
	{/foreach}
	<div><button id="dtAddRow" data-column="col1" class="btn radius6 btn-small btn-info showWidge addReset addbtncol1"> <i class="icon-plus"></i> Add Section </button></div>
</div>

<div class="col-sm-{$format.2} widget-container-span3" {if $layout.columns >= 3}{else}style="display:none;"{/if}>
	{foreach from=$sections.col2 item=item key="key"}
	{assign var="html_file" value=$item.template_html}
	<div  id="colsec2" class="widget-box collapsed" data-index="{$key}" data-column="col2" data-sectionKey="{$key}" data-idPage="{$page.id_page}" >
		<div class="widget-header widget-header-small header-color-orange">
			<h6>
				<i class="icon-sort"></i>
				{$item.section_title}
			</h6>

			<div class="widget-toolbar">
				<div class="hid  col2{$page.id_page}{$item.key_section}" id="jd{$key}">{$item.json}</div>
				<a title="Edit" data-rel="tooltip" data-column="col2" data-idPage="{$page.id_page}" data-keySection="{$item.key_section}" data-modID="jdata{$key}"  class="showWidge setFormValues editItem tooltip-success ignore" href="javascript:;">
					<span class="green">
						<i class="fa fa-pencil"></i>
					</span>
				</a>
				<a data-getdetails="forDeleteFxn" data-modid="jdata2" title="Delete" data-rel="tooltip" data-keySection="{$item.key_section}" data-idPage="{$page.id_page}" data-column="col2" data-toggle="modal" href="#secDeleteModal" role="button"class="tooltip-error showGlobal ignore tooltip-error" href="javascript:;">
					<span class="red">
						<i class="fa fa-trash"></i>
					</span>
				</a>
				<a href="#" data-action="collapse"> <i class="icon-chevron-down"></i> </a>
			</div>
		</div>

		<div class="widget-body">
			<div class="widget-main">
					{assign var="html_file" value=$item.template_html}
					{include file=$html_file}
			</div>
		</div>
	</div>
	{/foreach}
	<div><button id="dtAddRow" data-column="col2" class="btn radius6 btn-small btn-info showWidge addReset addbtncol2"> <i class="icon-plus"></i> Add Section </button></div>
</div>

<div class="col-sm-{$format.3} widget-container-span4" {if $layout.columns >= 4}{else}style="display:none;"{/if}>
	{foreach from=$sections.col3 item=item key="key"}
	{assign var="html_file" value=$item.template_html}
	<div  id="colsec3" class="widget-box collapsed" data-index="{$key}" data-column="col3" data-sectionKey="{$key}" data-idPage="{$page.id_page}" >
		<div class="widget-header widget-header-small header-color-orange">
			<h6>
				<i class="icon-sort"></i>
				{$item.section_title}
			</h6>

			<div class="widget-toolbar">
				<div class="hid  col3{$page.id_page}{$item.key_section}" id="jd{$key}">{$item.json}</div>
				<a title="Edit" data-rel="tooltip" data-column="col3" data-idPage="{$page.id_page}" data-keySection="{$item.key_section}" data-modID="jdata{$key}"  class="showWidge setFormValues editItem tooltip-success ignore" href="javascript:;">
					<span class="green">
						<i class="fa fa-pencil"></i>
					</span>
				</a>
				<a data-getdetails="forDeleteFxn" data-modid="jdata2" title="Delete" data-rel="tooltip" data-keySection="{$item.key_section}" data-idPage="{$page.id_page}" data-column="col3" data-toggle="modal" href="#secDeleteModal" role="button"class="tooltip-error showGlobal ignore tooltip-error" href="javascript:;">
					<span class="red">
						<i class="fa fa-trash"></i>
					</span>
				</a>
				<a href="#" data-action="collapse"> <i class="icon-chevron-down"></i> </a>
			</div>
		</div>

		<div class="widget-body">
			<div class="widget-main">
					{assign var="html_file" value=$item.template_html}
					{include file=$html_file}
			</div>
		</div>
	</div>
	{/foreach}
	<div><button id="dtAddRow" data-column="col3" class="btn radius6 btn-small btn-info showWidge addReset addbtncol3"> <i class="icon-plus"></i> Add Section </button></div>
</div>

<div class="clearfix"></div>

<h3 class="header smaller lighter blue">Preview</h3>
<iframe id="previewPage" src="{$base_url}{$page.link_rewrite}" style="min-height: 500px!important; width: 100%"></iframe> 
	<!-- view templatemodal -->		
	
<div id="viewTemplate" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-body">
		<div class="controls"> <img id="view_template_modal" src="" class="img-responsive"> </div>
      </div>
    </div>
  </div>
</div>
	<!-- update layout modal -->	
	
	<!-- update layout modal -->	
<!-- Modal -->
<div id="layoutTempModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Layout Template</h4>
      </div>
      <div class="modal-body">
		<label class="control-label" for="form-field-1">Select Layout Template</label>
			<input type="hidden" value="" name="data[limit]" id="limit"> 
			{foreach from=$layout_temp item=item} {assign var="layout_html" value="../default/images/layout/`$item`.png"}
			
			<label>
				<input type="radio"{if $layout.filename eq $item}checked{/if} id="page_layout" name="page_layout" value="{$item}" required/ class="span1 ace fieldEditable">
				<span class="lbl"><a class="viewTemplateButton" role="button" href="javascript:;" data-img="{$layout_html}"> <img class="layout-templates "src="{$layout_html}" class="img-responsive"> </a></span>
			</label>
			<br> 
			{/foreach} 
      </div>
      <div class="modal-footer">
		<div id="layoutTempModalButtons">
			<button data-dismiss="modal" class="btn btn-small" style="display: inline-block;"> <i class="icon-remove"></i> Cancel </button>
			<button id="layoutTempYes" class="btn btn-small btn-primary" style="display: inline-block;" data-idpage="{$page.id_page}"> <i class="icon-ok"></i> Update </button>
		</div>
		<img style="vertical-align:bottom !Important;" class="hid" id="sgLoading" src="img/loading.gif">&nbsp;&nbsp;&nbsp;
		<img class="hid" id="layoutTempModalLoading" src="img/3d.gif">
      </div>
    </div>

  </div>
</div>
	<!-- update layout modal -->	
	<!-- delete section modal -->
<div id="secDeleteModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Delete Section</h4>
      </div>
      <div class="modal-body">
		<div class="row-fluid">Are you sure you want to delete this Section?</div>
      </div>
      <div class="modal-footer">
		<button data-dismiss="modal" class="btn btn-small hideWhile" style="display: inline-block;"> <i class="icon-remove"></i> No </button>
			<button id="secDeleteYes" class="btn btn-small btn-primary hideWhile" data-yesfxn="deleteRow();" style="display: inline-block;"> <i class="icon-ok"></i> Yes </button>
			<input type="hidden" value="" id="deleteKeySection">
			<input type="hidden" value="" id="deleteKeyColumn">
			<input type="hidden" value="" id="deleteIdPage"> <img style="vertical-align:bottom !Important;" class="hid" id="sgLoading" src="img/loading.gif">&nbsp;&nbsp;&nbsp; <img class="hid" id="sgLoader" src="img/3d.gif"> </div>
      </div>
    </div>

  </div>
	
	<!-- delete section modal -->	
	<span class = "hid" id = "forDeleteFxn" data-mtitle = "Delete" data-mbody = "Are you sure you want to delete this Section?" data-myes = "deleteRow();"></span>
	<span class = "hid" id = "disableFxn" data-mtitle = "Disable Item Status" data-mbody = "Are you sure you want to Disable this item?" data-myes = "disableMod();"></span>
	<span class = "hid" id = "enableFxn" data-mtitle = "Enable Item Status" data-mbody = "Are you sure you want to Enable this item?" data-myes = "enableMod();"></span>
</div>
